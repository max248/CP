<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Itransition - Course work</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" type="image/png" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTgpEB0pwwB8BKgqs5msjHFdboMiy8LCFKKlQ&usqp=CAU">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/fonts.css">
    <link rel="stylesheet" href="/css/cards.css">
<!--    <link rel="stylesheet" href="css/dark-mode.css">-->
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://bootstraptema.ru/plugins/2015/tagcanvas/jquery.tagcanvas.min.js" type="text/javascript"></script>
    <script
            nomodule>window.MSInputMethodContext && document.documentMode && document.write('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-ie11@5/css/bootstrap-ie11.min.css">' +
        '<script src="https://cdn.jsdelivr.net/npm/ie11-custom-properties@4/ie11CustomProperties.min.js"><\/script>');</script>
</head>
<body>
<div class="ie-panel"><a href="#"><img src="/img/logo.jpg" height="42" width="820"
                                       alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today."></a>
</div>
<div class="preloader">
    <div class="preloader-body">
        <div class="cssload-container">
            <div class="cssload-speeding-wheel"></div>
        </div>
        <p>Loading...</p>
    </div>
</div>
<div class="page">
    <header class="section page-header">
        <!--RD Navbar-->
        <div class="rd-navbar-wrap">
            <nav class="rd-navbar rd-navbar-classic" data-layout="rd-navbar-fixed" data-sm-layout="rd-navbar-fixed"
                 data-md-layout="rd-navbar-fixed" data-md-device-layout="rd-navbar-fixed"
                 data-lg-layout="rd-navbar-static" data-lg-device-layout="rd-navbar-static"
                 data-xl-layout="rd-navbar-static" data-xl-device-layout="rd-navbar-static"
                 data-lg-stick-up-offset="46px" data-xl-stick-up-offset="46px" data-xxl-stick-up-offset="46px"
                 data-lg-stick-up="true" data-xl-stick-up="true" data-xxl-stick-up="true">
                <div class="rd-navbar-main-outer">
                    <div class="rd-navbar-main">
                        <!--RD Navbar Panel-->
                        <div class="rd-navbar-panel">
                            <!--RD Navbar Toggle-->
                            <button class="rd-navbar-toggle" data-rd-navbar-toggle=".rd-navbar-nav-wrap"><span></span>
                            </button>
                            <!--RD Navbar Brand-->
                            <div class="rd-navbar-brand">
                                <!--Brand-->
                                <a class="brand" href="/home">
                                <img class="brand-logo-dark" src="/img/logo.jpg" alt="" width="50" height="30"/>
                                <img class="brand-logo-light" src="/img/logo.jpg" alt="" width="50" height="30"/></a>
                            </div>
                        </div>
                        <div class="rd-navbar-main-element">
                            <div class="rd-navbar-nav-wrap">
                                <ul class="rd-navbar-nav">
                                    <li class="rd-nav-item"><a class="rd-nav-link" th:href="@{/login}" th:text="#{sign_in}">Sign in</a>
                                    </li>
                                    <li class="rd-nav-item"><a class="rd-nav-link" th:href="@{/register}" th:text="#{sign_up}">Sign up</a>
                                    </li>
                                    <li class="rd-nav-item">
                                        <div class="custom-control custom-switch">
                                            <input type="checkbox" class="custom-control-input" id="switchDark">
                                            <label class="custom-control-label" for="switchDark" th:text="#{dark_mode}"></label>
                                        </div>
                                    </li>
                                    <li class="rd-nav-item">
                                        <a class="lang"th:href="@{/?lang=en}">En</a>|
                                        <a class="lang"th:href="@{/?lang=ru}">Ru</a>|
                                        <a class="lang"th:href="@{/?lang=uz}">Uz</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </header>
    <label th:text="#{collection}" hidden id="collectionTxt"></label>
    <label th:text="#{details}" hidden id="detailsTxt"></label>
    <label th:text="#{topic}" hidden id="topicTxt"></label>
    <label th:text="#{comments}" hidden id="commentsTxt"></label>
    <div class="section" id="myItemCarousel">
        <div class="text-center">
            <h2 class="title" th:text="#{items}">Items</h2>
        </div>
    </div>
    <footer class="section footer-classic context-dark">
        <div class="container wide">
            <div class="row row-sm-30">
                <div class="col-lg-6">
                    <div class="group-md group-middle">
                        <p class="rights"><span>&copy;&nbsp; </span><span
                                class="copyright-year"></span><span>&nbsp;</span><span>Yuldoshev</span><span>.&nbsp;</span></p>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="text-lg-right">
                        <ul class="group-xl group-middle">
                            <li><a class="icon icon-default icon-sm mdi mdi-rss" href="#"></a></li>
                            <li><a class="icon icon-default icon-sm mdi mdi-twitter" href="#"></a></li>
                            <li><a class="icon icon-default icon-sm mdi mdi-facebook" href="#"></a></li>
                            <li><a class="icon icon-default icon-sm mdi mdi-linkedin-box" href="https://www.linkedin.com/in/abbos-yuldoshev-a9b7bb196/"></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</div>
<div class="snackbars" id="form-output-global"></div>
</body>
</html>
<script>
    var txtCollection = document.getElementById('collectionTxt').textContent
    var txtDetails = document.getElementById('detailsTxt').textContent
    var txtTopic = document.getElementById('topicTxt').textContent
    var txtComments = document.getElementById('commentsTxt').textContent
    $(document).ready(function (){

        $("#switchDark").change(function (){
           $("body").toggleClass("bg-secondary");
           $(".section,.rd-navbar-main-outer").toggleClass("dark-mode");
           $("nav").toggleClass("nav-dark-mode");
           $(".custom-control-label").toggleClass("text-white");
           $("h1, h2, p, div,.rd-nav-item,.rd-nav-link,.lang").toggleClass("text-white");
       });

        $.ajax({
            url: "/get_items",
            type: "POST",
            data: '',
            success: function (response){
                // console.log("response: " + JSON.stringify(response));
                var rowTxt = ''
                for (var i=0;i<response.length; i++){
                    // rowTxt = '';
                    var colDiv = '';
                    var tagDiv = 'Tags: ';
                    if(response[i].json[0].json.columns != null)
                        response[i].json[0].json.columns.forEach(function(col){
                            colDiv +=
                                col.name + ': <span>' + col.data + '</span><br>';
                        });
                    if(response[i].json[0].json.tags != null)
                        response[i].json[0].json.tags.forEach(function(tag){
                            tagDiv += '<a href="#"> #<span style="color: #00aced">' + tag.name + '</span> </a>';
                        });
                    rowTxt +=
                        '<div class="testimonial-box">' +
                        '<div class="testimonial-title">' + response[i].json[0].name + '</div>' +
                        '<div>' +
                        '<img src="' + response[i].json[0].image_url + '" ' +
                        'alt=""/>' +
                        '</div>' +
                        '<div class="testimonial-text">' +
                        '<p class="item-price">' + colDiv + tagDiv +
                        '<br>' + txtComments + ' :<span style="color: #4de17c"> <a href="#">' + response[i].json[0].comment_count + '</a></span></p>' +
                        '</div>' +
                        '<div class="testimonial-name">' + txtCollection + ' : <a href="#">Strategy</a></div>' +
                        '<div class="star-rating">' +
                        '<ul class="list-inline">' +
                        '<li class="list-inline-item"><i class="fa fa-star"></i></li>' +
                        '<li class="list-inline-item"><i class="fa fa-star"></i></li>' +
                        '<li class="list-inline-item"><i class="fa fa-star"></i></li>' +
                        '<li class="list-inline-item"><i class="fa fa-star"></i></li>' +
                        '<li class="list-inline-item"><i class="fa fa-star-o"></i></li>' +
                        '</ul>' +
                        '</div>' +
                        '<a href="#" class="btn btn-primary">' + txtDetails + '</a>'+
                        '</div>';
                }
                var divTxt = '<div class="owl-carousel owl-theme-1" data-items="1" data-sm-items="1" data-md-items="1" data-lg-items="1" data-xl-items="2" data-xxl-items="3" data-margin="15px" data-nav="false" data-dots="true">';
                divTxt += rowTxt + '</div>';
                $('#myItemCarousel').append(divTxt);

            },
            error: function (error){
                console.log("error: " + error);
            }
        });

        var tagString = '<script async type=\"text/javascript\" src=\"/js/script.js\"><\/script>';
        var range = document.createRange();
        range.selectNode(document.getElementsByTagName("BODY")[0]);
        var documentFragment = range.createContextualFragment(tagString);
        document.body.appendChild(documentFragment);
    });
</script>
<script src="/js/core.min.js"></script>
<script src="/js/script.js"></script>
<style>
    .dark-mode{
        background-color: rgb(11 18 64 / 84%);
    }
    .nav-dark-mode{
        background-color: #252e65;
    }
    .ie-panel {
        display: none;
        background: #212121;
        padding: 10px 0;
        box-shadow: 3px 3px 5px 0 rgba(0, 0, 0, .3);
        clear: both;
        text-align: center;
        position: relative;
        z-index: 1;
    }

    html.ie-10 .ie-panel, html.lt-ie-10 .ie-panel {
        display: block;
    }
</style>

